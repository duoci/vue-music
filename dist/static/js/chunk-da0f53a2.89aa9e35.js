(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-da0f53a2"],{"0f8c":function(t,i,s){"use strict";s("f67d")},2444:function(t,i,s){},"456c":function(t,i,s){"use strict";s.r(i);var a=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"rankingContainer"},[s("div",{staticClass:"ranking"},[s("div",{staticClass:"title"},[t._v("官方榜")]),t._l(t.officialListDetail,(function(i,a){return s("rankingTab",{key:a,attrs:{officialListDetailItem:i},on:{handleRowDbClick:t.handleRowDbClick,clickCheckAll:t.clickListCardItem}})})),s("div",{staticClass:"global"},[s("div",{staticClass:"title"},[t._v("全球榜")]),s("list-card",{staticClass:"listCard",attrs:{listCardData:t.globalList},on:{clickListCardItem:t.clickListCardItem}})],1)],2)])},e=[],l=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"rankingTab"},[s("div",{staticClass:"tabBox"},[s("div",{staticClass:"left"},[s("img",{staticClass:"auto-img",attrs:{src:t.officialListDetailItem.coverImgUrl,alt:""},on:{click:function(i){return t.clickCheckAll(t.officialListDetailItem.id)}}})]),s("div",{staticClass:"right"},[s("table",t._l(t.officialListDetailItem.tracks.slice(0,5),(function(i,a){return s("tr",{key:a,staticClass:"listRows",on:{dblclick:function(i){return t.handleRowDbClick(t.officialListDetailItem.id,a)}}},[s("th",{staticClass:"index"},[t._v(t._s(a+1))]),s("th",{staticClass:"musicName"},[t._v(t._s(i.name))]),s("th",{staticClass:"singer"},[t._v(t._s(i.ar[0].name))])])})),0),s("div",{staticClass:"lookAll",on:{click:function(i){return t.clickCheckAll(t.officialListDetailItem.id)}}},[t._v("查看全部"),s("i",{staticClass:"iconfont icon-arrow-right-bold"})])])])])},c=[],n={name:"rankingTab",props:{officialListDetailItem:{type:Object,default(){return{}}}},methods:{handleRowDbClick(t,i){const{listId:s}=this;this.$emit("handleRowDbClick",{id:t,index:i,listId:s})},clickCheckAll(t){const{listId:i}=this;this.$emit("clickCheckAll",{id:t,listId:i})}}},r=n,o=(s("0f8c"),s("2877")),d=Object(o["a"])(r,l,c,!1,null,"64e9e82a",null),u=d.exports,f=s("9916"),h=s("d930"),m=s("2f62"),C={name:"ranking",components:{rankingTab:u,ListCard:f["a"]},data(){return{officialList:[],officialListDetail:[],globalList:[]}},computed:{...Object(m["c"])(["musicListId"])},async created(){await this.getAllRankings(),this.officialList.forEach(t=>{this.getMusicListDetail(t.id)})},methods:{...Object(m["b"])(["updateMusicList","updateMusicId"]),async getAllRankings(){const t=await this.get("/toplist");this.officialList=t.list.slice(0,4),this.globalList=t.list.slice(4)},async getMusicListDetail(t){let i=await this.get("/playlist/detail",{id:t});i=i.playlist,i.tracks.forEach((t,s)=>{i.tracks[s].dt=Object(h["b"])(t.dt)}),this.officialListDetail.push(i)},clickListCardItem(t){t.id&&(t=t.id),this.$router.push({name:"musicListDetail",params:{id:t}})},handleRowDbClick({id:t,index:i}){const s=this.officialListDetail.findIndex(i=>i.id===t);this.updateMusicId(this.officialListDetail[s].tracks[i].id),t!==this.musicListId&&this.updateMusicList({musicList:this.officialListDetail[s].tracks,musicListId:t})}}},k=C,g=(s("c98f"),Object(o["a"])(k,a,e,!1,null,"6adc22aa",null));i["default"]=g.exports},9916:function(t,i,s){"use strict";var a=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.load,expression:"load"}],ref:"listCard",staticClass:"listCard",attrs:{"infinite-scroll-disabled":t.disabled,"infinite-scroll-distance":300,"infinite-scroll-immediate":!1}},t._l(t.listCardData,(function(i,a){return s("div",{key:a,staticClass:"listCardItem",on:{click:function(s){return t.clickListCardItem(i.id)}}},[s("div",{staticClass:"image"},[s("img",{attrs:{src:(i.picUrl||i.coverImgUrl)+"?param=400y400",alt:""}})]),s("div",{staticClass:"title"},[t._v(t._s(i.name))])])})),0)},e=[],l={name:"ListCard",props:{listCardData:{type:Array,default(){return[]}},isLoad:{type:Boolean,default(){return!1}}},data(){return{disabled:!0}},methods:{clickListCardItem(t){this.$emit("clickListCardItem",t)},load(){this.$emit("bottomLoad"),this.disabled=!0}},watch:{listCardData(){!0===this.isLoad&&(0!==this.listCardData.length?this.disabled=!1:this.disabled=!0)}}},c=l,n=(s("d33a"),s("2877")),r=Object(n["a"])(c,a,e,!1,null,"78ab9603",null);i["a"]=r.exports},c98f:function(t,i,s){"use strict";s("daf5")},d33a:function(t,i,s){"use strict";s("2444")},d930:function(t,i,s){"use strict";function a(t,i){/(y+)/.test(i)&&(i=i.replace(RegExp.$1,(""+t.getFullYear()).substr(4-RegExp.$1.length)));const s={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(const a in s)if(new RegExp(`(${a})`).test(i)){const t=""+s[a];i=i.replace(RegExp.$1,1===RegExp.$1.length?t:e(t))}return i}function e(t){return("00"+t).substr(t.length)}function l(t){return t>1e4?(t=(t/1e4).toFixed(1),t+"万"):t}function c(t){t=parseInt(t),t=t>1e4?Math.floor(t/1e3):Math.floor(t);let i=Math.floor(t/60),s=Math.floor(t%60);return i=i<10?"0"+i:i,s=s<10?"0"+s:s,`${i}:${s}`}function n(t){t=t.split(":");const i=parseInt(t[0]),s=parseInt(t[1]);return 60*i+s}s.d(i,"a",(function(){return a})),s.d(i,"c",(function(){return l})),s.d(i,"b",(function(){return c})),s.d(i,"d",(function(){return n}))},daf5:function(t,i,s){},f67d:function(t,i,s){}}]);
//# sourceMappingURL=chunk-da0f53a2.89aa9e35.js.map