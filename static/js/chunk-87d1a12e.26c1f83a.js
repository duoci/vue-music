(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-87d1a12e"],{2444:function(t,s,i){},"6ffa":function(t,s,i){},"972a":function(t,s,i){"use strict";i.r(s);var a=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"personal"},[i("div",{staticClass:"personal-header"},[i("div",{staticClass:"userBox"},[i("div",{staticClass:"userBox-avatarUrl"},[i("img",{staticClass:"auto-img da",attrs:{src:t.userInfo.avatarUrl+"?param=400y400",alt:""}})]),i("div",{staticClass:"userInfo"},[i("div",{staticClass:"nameBox"},[i("div",{staticClass:"uesrName"},[t._v(t._s(t.userInfo.nickname))]),i("div",{staticClass:"grade"},[t._v(t._s("Lv"+t.userInfo.level))])]),i("div",{staticClass:"information"},[i("div",{staticClass:"attention"},[i("div",{staticClass:"num"},[t._v(t._s(t.userInfo.newFollows))]),i("div",{staticClass:"title"},[t._v("关注")])]),i("div",{staticClass:"attention"},[i("div",{staticClass:"num"},[t._v(t._s(t.userInfo.followeds))]),i("div",{staticClass:"title"},[t._v("粉丝")])]),i("div",{staticClass:"attention"},[i("div",{staticClass:"num"},[t._v(t._s(t.userInfo.eventCount))]),i("div",{staticClass:"title"},[t._v("动态")])])]),i("div",{staticClass:"desc"},[i("span",[t._v("个人介绍:")]),i("span",[t._v(" "+t._s(""==t.userInfo.signature?"暂无介绍":t.userInfo.signature))])])])])]),i("div",{staticClass:"musicList"},[0!=t.createdMusicList.length?i("div",{staticClass:"musicListTitle"},[t._v(t._s(t.userInfo.nickname)+"创建的歌单("+t._s(t.createdMusicList.length)+")")]):t._e(),i("list-card",{attrs:{listCardData:t.createdMusicList},on:{clickListCardItem:t.clickListCardItem}}),0!=t.collectedMusicList.length?i("div",{staticClass:"musicListTitle"},[t._v(t._s(t.userInfo.nickname)+"收藏的歌单("+t._s(t.collectedMusicList.length)+")")]):t._e(),i("list-card",{attrs:{listCardData:t.collectedMusicList},on:{clickListCardItem:t.clickListCardItem}})],1),t.isCurrentUser&&this.isLogin?i("div",{staticClass:"outLogin",on:{click:t.logout}},[i("i",{staticClass:"iconfont icon-zhuxiao1"}),i("span",[t._v("退出登录")])]):t._e()])},e=[],r=i("9916"),l=i("2f62"),c={name:"personal",components:{ListCard:r["a"]},data(){return{userInfo:{},isCurrentUser:!1,createdMusicList:[],collectedMusicList:[]}},computed:{...Object(l["c"])(["isLogin"])},async created(){await this.getUserInfo(),this.getUserMusicList(),window.localStorage.getItem("userId")&&(this.isCurrentUser=window.localStorage.getItem("userId")===this.$route.params.uid),this.isCurrentUser||(this.isCurrentUser=Number(window.localStorage.getItem("userId"))===this.$route.params.uid)},methods:{...Object(l["b"])(["updataLoginState"]),async getUserInfo(){const{uid:t}=this.$route.params,s=await this.get("/user/detail?uid="+t);s?(s.profile.level=s.level,this.userInfo=s.profile):this.$message.error("获取用户信息失败!")},async getUserMusicList(){const t=Date.parse(new Date);let s=await this.get("/user/playlist",{uid:this.$route.params.uid,timestamp:t});if(0===s.playlist.length)return;s=s.playlist;const i=s.findIndex(t=>!0===t.subscribed);s[0].name=this.userInfo.nickname+"喜欢的音乐",this.createdMusicList=s.slice(0,i),this.collectedMusicList=s.slice(i)},clickListCardItem(t){this.$router.push({name:"musicListDetail",params:{id:t}})},async logout(){await this.get("/logout");window.localStorage.removeItem("userId"),this.updataLoginState(!1),this.$message.success("退出成功!"),this.isCurrentUser=!1}}},n=c,d=(i("9a26"),i("2877")),o=Object(d["a"])(n,a,e,!1,null,"fd5b8210",null);s["default"]=o.exports},9916:function(t,s,i){"use strict";var a=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.load,expression:"load"}],ref:"listCard",staticClass:"listCard",attrs:{"infinite-scroll-disabled":t.disabled,"infinite-scroll-distance":300,"infinite-scroll-immediate":!1}},t._l(t.listCardData,(function(s,a){return i("div",{key:a,staticClass:"listCardItem",on:{click:function(i){return t.clickListCardItem(s.id)}}},[i("div",{staticClass:"image"},[i("img",{attrs:{src:(s.picUrl||s.coverImgUrl)+"?param=400y400",alt:""}})]),i("div",{staticClass:"title"},[t._v(t._s(s.name))])])})),0)},e=[],r={name:"ListCard",props:{listCardData:{type:Array,default(){return[]}},isLoad:{type:Boolean,default(){return!1}}},data(){return{disabled:!0}},methods:{clickListCardItem(t){this.$emit("clickListCardItem",t)},load(){this.$emit("bottomLoad"),this.disabled=!0}},watch:{listCardData(){!0===this.isLoad&&(0!==this.listCardData.length?this.disabled=!1:this.disabled=!0)}}},l=r,c=(i("d33a"),i("2877")),n=Object(c["a"])(l,a,e,!1,null,"78ab9603",null);s["a"]=n.exports},"9a26":function(t,s,i){"use strict";i("6ffa")},d33a:function(t,s,i){"use strict";i("2444")}}]);
//# sourceMappingURL=chunk-87d1a12e.26c1f83a.js.map